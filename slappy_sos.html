<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SLAPPY â€” SOS</title>
    <style>
        :root {
            /* Typography - SLAPPY UI CORE */
            --font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-title: 14px;
            --font-body: 12px;
            --font-meta: 11px;
            --weight-title: 500;
            --weight-body: 400;
            --weight-meta: 400;

            /* Spacing */
            --padding-page: 16px;
            --padding-card: 14px;
            --gap-sections: 16px;
            --gap-cards: 10px;
            --gap-inner: 12px;

            /* Radius */
            --radius-card: 12px;
            --radius-button: 12px;
            --radius-icon: 10px;

            /* Buttons */
            --button-height: 48px;
            --button-font-size: 14px;
            --button-font-weight: 500;

            /* Icons */
            --icon-size: 40px;

            /* Borders */
            --border-default: 1px solid var(--gray-200);

            /* Layout */
            --header-height: 56px;
            --nav-height: 60px;

            /* Colors */
            --teal: #0d9488;
            --teal-dark: #0f766e;
            --teal-50: #f0fdfa;
            --teal-100: #ccfbf1;
            --green: #22c55e;
            --green-dark: #16a34a;
            --green-50: #f0fdf4;
            --green-100: #dcfce7;
            --green-border: #86efac;
            --red: #dc2626;
            --red-dark: #b91c1c;
            --red-50: #fef2f2;
            --red-100: #fee2e2;
            --red-border: #fca5a5;
            --orange: #f59e0b;
            --orange-dark: #d97706;
            --orange-50: #fffbeb;
            --orange-100: #fef3c7;
            --orange-border: #fcd34d;
            --blue: #3b82f6;
            --blue-dark: #2563eb;
            --blue-50: #eff6ff;
            --blue-100: #dbeafe;
            --blue-border: #93c5fd;
            --yellow: #facc15;
            --yellow-50: #fefce8;
            --yellow-100: #fef9c3;
            --gray-900: #111827;
            --gray-700: #374151;
            --gray-600: #4b5563;
            --gray-500: #6b7280;
            --gray-400: #9ca3af;
            --gray-300: #d1d5db;
            --gray-200: #e5e7eb;
            --gray-100: #f3f4f6;
            --gray-50: #f9fafb;
            --white: #ffffff;
            --shadow-md: 0 2px 8px rgba(0,0,0,0.06);

            /* Gradient */
            --gradient-sos: radial-gradient(ellipse at center, #ef5350 0%, #ffcdd2 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; overflow: hidden; }
        body {
            font-family: var(--font-system);
            font-size: var(--font-body);
            font-weight: var(--weight-body);
            background: var(--gray-100);
            color: var(--gray-700);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app { 
            width: 100%; 
            max-width: 480px; 
            height: 100vh;
            height: 100dvh;
            margin: 0 auto; 
            background: var(--gray-50); 
            display: flex; 
            flex-direction: column;
            overflow: hidden;
        }

        @media (min-width: 481px) { 
            body { display: flex; justify-content: center; } 
            .app { box-shadow: 0 0 20px rgba(0,0,0,0.1); } 
        }

        /* ===== HEADER MINIMO ===== */
        .header {
            background: var(--gradient-sos);
            color: var(--white);
            padding: 12px var(--padding-page);
            height: 48px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }
        .header-back {
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.2);
            border: none;
            border-radius: 50%;
            color: var(--white);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }
        .header-back:hover { background: rgba(255,255,255,0.3); }
        .header-title { font-size: var(--font-title); font-weight: var(--weight-title); }

        /* ===== CONTENT ===== */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: var(--padding-page);
            padding-bottom: calc(var(--nav-height) + 20px);
        }

        /* ===== BLOCCO 1: EMERGENZA 112 ===== */
        .emergency-block {
            background: linear-gradient(135deg, var(--red), var(--red-dark));
            border-radius: var(--radius-card);
            padding: 24px 20px;
            margin-bottom: var(--gap-sections);
            text-align: center;
        }
        .emergency-number {
            font-size: 72px;
            font-weight: 500;
            color: var(--white);
            line-height: 1;
            margin-bottom: 8px;
            letter-spacing: -2px;
        }
        .emergency-label {
            font-size: 18px;
            font-weight: 500;
            color: var(--white);
            margin-bottom: 4px;
        }
        .emergency-hint {
            font-size: 12px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 20px;
        }
        .emergency-actions {
            display: flex;
            gap: 12px;
        }
        .emergency-btn {
            flex: 1;
            height: 56px;
            border-radius: var(--radius-button);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            text-decoration: none;
        }
        .emergency-btn.call {
            background: var(--white);
            color: var(--red);
        }
        .emergency-btn.location {
            background: rgba(255,255,255,0.2);
            color: var(--white);
        }
        .emergency-btn:active { transform: scale(0.98); }

        /* ===== BLOCCO 2: AIUTO MEDICO ===== */
        .section-label { 
            font-size: var(--font-meta); 
            font-weight: 500; 
            color: var(--gray-500); 
            text-transform: uppercase; 
            letter-spacing: 0.6px; 
            margin: 20px 0 8px; 
        }
        .section-label:first-child { margin-top: 0; }

        .help-card {
            background: var(--white);
            border: var(--border-default);
            border-radius: var(--radius-card);
            padding: var(--padding-card);
            margin-bottom: var(--gap-cards);
            display: flex;
            align-items: center;
            gap: var(--gap-inner);
        }
        .help-card:hover { border-color: var(--gray-300); }

        .help-icon {
            width: var(--icon-size);
            height: var(--icon-size);
            border-radius: var(--radius-icon);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }
        .help-icon.pharmacy { background: var(--green-100); }
        .help-icon.hospital { background: var(--red-100); }
        .help-icon.doctor { background: var(--orange-100); }

        .help-content { flex: 1; min-width: 0; }
        .help-title { font-size: var(--font-title); font-weight: var(--weight-title); color: var(--gray-900); }
        .help-sub { font-size: var(--font-body); font-weight: var(--weight-body); color: var(--gray-600); margin-top: 2px; }
        .help-meta { font-size: var(--font-meta); font-weight: var(--weight-meta); color: var(--gray-400); margin-top: 2px; }

        .help-status {
            font-size: 10px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 100px;
            text-transform: uppercase;
            flex-shrink: 0;
        }
        .help-status.open { background: var(--green); color: var(--white); }
        .help-status.closed { background: var(--gray-400); color: var(--white); }

        .help-actions { display: flex; gap: 8px; flex-shrink: 0; }

        .action-btn {
            width: var(--icon-size);
            height: var(--icon-size);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            border: none;
            cursor: pointer;
            text-decoration: none;
        }
        .action-btn.call { background: var(--green); color: var(--white); }
        .action-btn.nav { background: var(--blue); color: var(--white); }
        .action-btn:active { transform: scale(0.95); }

        /* ===== BLOCCO 3: ACCORDION ===== */
        .accordion {
            background: var(--white);
            border-radius: var(--radius-card);
            overflow: hidden;
            margin-top: var(--gap-sections);
            border: 1.5px solid var(--gray-200);
        }
        .accordion-header {
            padding: var(--padding-card);
            display: flex;
            align-items: center;
            gap: var(--gap-inner);
            cursor: pointer;
            background: var(--gray-50);
            border: 1px solid transparent;
        }
        .accordion-header:hover { border-color: var(--gray-300); }
        .accordion-icon {
            width: var(--icon-size);
            height: var(--icon-size);
            background: var(--gray-200);
            border-radius: var(--radius-icon);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        .accordion-title { flex: 1; font-size: var(--font-title); font-weight: var(--weight-title); color: var(--gray-900); }
        .accordion-arrow { 
            font-size: 18px; 
            color: var(--gray-400); 
            transition: transform 0.2s; 
        }
        .accordion.open .accordion-arrow { transform: rotate(180deg); }

        .accordion-content {
            display: none;
            border-top: 1px solid var(--gray-200);
        }
        .accordion.open .accordion-content { display: block; }

        .accordion-item {
            padding: 12px var(--padding-card);
            display: flex;
            align-items: center;
            gap: var(--gap-inner);
            border-bottom: 1px solid var(--gray-100);
            cursor: pointer;
            border-left: 1px solid transparent;
            border-right: 1px solid transparent;
        }
        .accordion-item:last-child { border-bottom: none; }
        .accordion-item:hover { border-left-color: var(--gray-300); border-right-color: var(--gray-300); }

        .accordion-item-icon {
            width: var(--icon-size);
            height: var(--icon-size);
            border-radius: var(--radius-icon);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }
        .accordion-item-content { flex: 1; }
        .accordion-item-title { font-size: var(--font-title); font-weight: 500; color: var(--gray-900); }
        .accordion-item-sub { font-size: var(--font-meta); color: var(--gray-500); }
        .accordion-item-arrow { font-size: 16px; color: var(--gray-300); }

        .icon-bg-red { background: var(--red-100); }
        .icon-bg-green { background: var(--green-100); }
        .icon-bg-blue { background: var(--blue-100); }
        .icon-bg-yellow { background: var(--yellow-100); }
        .icon-bg-orange { background: var(--orange-100); }

        /* ===== SUBPAGES ===== */
        .subpage {
            position: fixed;
            inset: 0;
            background: var(--gray-50);
            z-index: 200;
            display: flex;
            flex-direction: column;
            transform: translateX(100%);
            transition: transform 0.25s ease;
            visibility: hidden;
        }
        .subpage.active { 
            transform: translateX(0); 
            visibility: visible;
        }
        .subpage.no-transition { 
            transition: none !important; 
        }

        .subpage-header {
            background: var(--red);
            color: var(--white);
            padding: 12px var(--padding-page);
            height: 48px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }
        .subpage-back {
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.2);
            border: 1px solid transparent;
            border-radius: var(--radius-button);
            color: var(--white);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .subpage-back:hover { border-color: rgba(255,255,255,0.4); }
        .subpage-title { font-size: var(--font-title); font-weight: var(--weight-title); }

        /* Tab bar scrollabile */
        .subpage-tabs {
            display: flex;
            gap: 8px;
            padding: 12px var(--padding-page);
            background: var(--white);
            border-bottom: 1px solid var(--gray-200);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            flex-shrink: 0;
        }
        .subpage-tabs::-webkit-scrollbar { display: none; }
        .subpage-tab {
            padding: 8px 14px;
            border-radius: 100px;
            font-size: var(--font-body);
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            border: 1px solid var(--gray-200);
            background: var(--white);
            color: var(--gray-600);
            flex-shrink: 0;
        }
        .subpage-tab:hover { border-color: var(--gray-300); }
        .subpage-tab.active {
            background: var(--red);
            color: var(--white);
            border-color: var(--red);
        }

        .subpage-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--padding-page);
        }

        .list-card {
            background: var(--white);
            border: var(--border-default);
            border-radius: var(--radius-card);
            overflow: hidden;
            margin-bottom: var(--gap-cards);
        }
        .list-item {
            padding: var(--padding-card);
            display: flex;
            align-items: center;
            gap: var(--gap-inner);
            border-bottom: 1px solid var(--gray-100);
        }
        .list-item:last-child { border-bottom: none; }
        .list-icon {
            width: var(--icon-size);
            height: var(--icon-size);
            border-radius: var(--radius-icon);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }
        .list-content { flex: 1; }
        .list-title { font-size: var(--font-title); font-weight: var(--weight-title); color: var(--gray-900); }
        .list-sub { font-size: var(--font-body); font-weight: var(--weight-body); color: var(--gray-500); margin-top: 2px; }
        .list-meta { font-size: var(--font-meta); font-weight: var(--weight-meta); color: var(--gray-400); margin-top: 2px; }
        .list-actions { display: flex; gap: 8px; }

        /* ===== BOTTOM NAV ===== */
        .bottom-nav { 
            background: var(--white); 
            border-top: 1px solid var(--gray-200); 
            display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            height: var(--nav-height);
            padding: 8px 0; 
            padding-bottom: max(8px, env(safe-area-inset-bottom));
            flex-shrink: 0;
        }
        .nav-btn { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 2px; 
            background: none; 
            border: none; 
            cursor: pointer; 
            color: var(--gray-400); 
            padding: 4px; 
        }
        .nav-btn.active { color: var(--red); }
        .nav-btn-icon { font-size: 20px; }
        .nav-btn-label { font-size: 10px; font-weight: 500; }
    </style>
</head>
<body>
<div class="app">
    <header class="header">
        <a href="slappy_home.html" class="header-back">â†</a>
        <div class="header-title">ğŸ†˜ SOS</div>
    </header>

    <div class="content">
        <!-- BLOCCO 1: EMERGENZA 112 -->
        <div class="emergency-block">
            <div class="emergency-number">112</div>
            <div class="emergency-label">EMERGENZA</div>
            <div class="emergency-hint">Pericolo immediato Â· Malore grave Â· Incidenti</div>
            <div class="emergency-actions">
                <a class="emergency-btn call" href="tel:112">ğŸ“ Chiama</a>
                <button class="emergency-btn location" onclick="sharePosition()">ğŸ“ Posizione</button>
            </div>
        </div>

        <!-- BLOCCO 2: AIUTO MEDICO (3 card) -->
        <div class="section-label">Aiuto medico</div>

        <div class="help-card">
            <div class="help-icon pharmacy">ğŸ’Š</div>
            <div class="help-content">
                <div class="help-title">Farmacia di turno</div>
                <div class="help-sub">Alla Madonna Â· Via Fausta 98</div>
            </div>
            <div class="help-status open">Aperta</div>
            <div class="help-actions">
                <a class="action-btn call" href="tel:0415370113">ğŸ“</a>
                <a class="action-btn nav" href="https://maps.google.com/?q=Farmacia+Alla+Madonna+Ca+Savio" target="_blank">ğŸ“</a>
            </div>
        </div>

        <div class="help-card">
            <div class="help-icon hospital">ğŸ¥</div>
            <div class="help-content">
                <div class="help-title">Pronto Soccorso</div>
                <div class="help-sub">PPI Ca' Savio Â· Via Fausta 374</div>
                <div class="help-meta">~5 min in auto</div>
            </div>
            <div class="help-actions">
                <a class="action-btn call" href="tel:0415370360">ğŸ“</a>
                <a class="action-btn nav" href="https://maps.google.com/?q=PPI+Ca+Savio" target="_blank">ğŸ“</a>
            </div>
        </div>

        <div class="help-card">
            <div class="help-icon doctor">ğŸ‘¨â€âš•ï¸</div>
            <div class="help-content">
                <div class="help-title">Guardia Medica</div>
                <div class="help-sub">Via Fausta 374, Ca' Savio</div>
                <div class="help-meta">116117 Â· Notturno 20-08 Â· Festivi</div>
            </div>
            <div class="help-actions">
                <a class="action-btn call" href="tel:116117">ğŸ“</a>
                <a class="action-btn nav" href="https://maps.google.com/?q=Guardia+Medica+Ca+Savio+Via+Fausta+374" target="_blank">ğŸ“</a>
            </div>
        </div>

        <!-- BLOCCO 3: ACCORDION -->
        <div class="accordion" id="accordion">
            <div class="accordion-header" onclick="toggleAccordion()">
                <div class="accordion-icon">ğŸ“Œ</div>
                <div class="accordion-title">Altri servizi</div>
                <div class="accordion-arrow">â–¼</div>
            </div>
            <div class="accordion-content">
                <div class="accordion-item" onclick="openSubpage('emergency')">
                    <div class="accordion-item-icon icon-bg-red">ğŸš¨</div>
                    <div class="accordion-item-content">
                        <div class="accordion-item-title">Numeri emergenza</div>
                        <div class="accordion-item-sub">118, 115, 1530, Antiveleni</div>
                    </div>
                    <div class="accordion-item-arrow">â†’</div>
                </div>
                <div class="accordion-item" onclick="openSubpage('pharmacies')">
                    <div class="accordion-item-icon icon-bg-green">ğŸ’Š</div>
                    <div class="accordion-item-content">
                        <div class="accordion-item-title">Tutte le farmacie</div>
                        <div class="accordion-item-sub">Orari e turni</div>
                    </div>
                    <div class="accordion-item-arrow">â†’</div>
                </div>
                <div class="accordion-item" onclick="openSubpage('hospitals')">
                    <div class="accordion-item-icon icon-bg-red">ğŸ¥</div>
                    <div class="accordion-item-content">
                        <div class="accordion-item-title">Ospedali zona</div>
                        <div class="accordion-item-sub">PS e PPI</div>
                    </div>
                    <div class="accordion-item-arrow">â†’</div>
                </div>
                <div class="accordion-item" onclick="openSubpage('vet')">
                    <div class="accordion-item-icon icon-bg-yellow">ğŸ¾</div>
                    <div class="accordion-item-content">
                        <div class="accordion-item-title">Veterinario</div>
                        <div class="accordion-item-sub">H24 emergenze animali</div>
                    </div>
                    <div class="accordion-item-arrow">â†’</div>
                </div>
                <div class="accordion-item" onclick="openSubpage('other')">
                    <div class="accordion-item-icon icon-bg-blue">ğŸ“</div>
                    <div class="accordion-item-content">
                        <div class="accordion-item-title">Altri contatti</div>
                        <div class="accordion-item-sub">Polizia, Taxi, Consolati</div>
                    </div>
                    <div class="accordion-item-arrow">â†’</div>
                </div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <button class="nav-btn"><span class="nav-btn-icon">ğŸ </span><span class="nav-btn-label">Home</span></button>
        <button class="nav-btn"><span class="nav-btn-icon">â˜€ï¸</span><span class="nav-btn-label">Meteo</span></button>
        <button class="nav-btn"><span class="nav-btn-icon">ğŸšŒ</span><span class="nav-btn-label">Trasporti</span></button>
        <button class="nav-btn"><span class="nav-btn-icon">ğŸ§­</span><span class="nav-btn-label">Esplora</span></button>
        <button class="nav-btn active"><span class="nav-btn-icon">ğŸ†˜</span><span class="nav-btn-label">SOS</span></button>
    </nav>
</div>

<!-- SUBPAGES -->
<div class="subpage" id="subpage-emergency">
    <div class="subpage-header">
        <button class="subpage-back" onclick="closeSubpage()">â†</button>
        <div class="subpage-title">Altri servizi</div>
    </div>
    <div class="subpage-tabs">
        <div class="subpage-tab active" onclick="switchTab('emergency')">ğŸš¨ Emergenza</div>
        <div class="subpage-tab" onclick="switchTab('pharmacies')">ğŸ’Š Farmacie</div>
        <div class="subpage-tab" onclick="switchTab('hospitals')">ğŸ¥ Ospedali</div>
        <div class="subpage-tab" onclick="switchTab('vet')">ğŸ¾ Veterinario</div>
        <div class="subpage-tab" onclick="switchTab('other')">ğŸ“ Contatti</div>
    </div>
    <div class="subpage-content">
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-red">ğŸš”</div>
                <div class="list-content">
                    <div class="list-title" style="color: var(--red); font-size: 18px;">112</div>
                    <div class="list-sub">Numero Unico Emergenze</div>
                </div>
                <a class="action-btn call" href="tel:112">ğŸ“</a>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-red">ğŸš‘</div>
                <div class="list-content">
                    <div class="list-title">118</div>
                    <div class="list-sub">Emergenza Sanitaria</div>
                </div>
                <a class="action-btn call" href="tel:118">ğŸ“</a>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-orange">ğŸ”¥</div>
                <div class="list-content">
                    <div class="list-title">115</div>
                    <div class="list-sub">Vigili del Fuoco</div>
                </div>
                <a class="action-btn call" href="tel:115">ğŸ“</a>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-blue">âš“</div>
                <div class="list-content">
                    <div class="list-title">1530</div>
                    <div class="list-sub">Guardia Costiera</div>
                </div>
                <a class="action-btn call" href="tel:1530">ğŸ“</a>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-yellow">â˜ ï¸</div>
                <div class="list-content">
                    <div class="list-title">Centro Antiveleni</div>
                    <div class="list-sub">Ospedale Niguarda Milano</div>
                </div>
                <a class="action-btn call" href="tel:0266101029">ğŸ“</a>
            </div>
        </div>
    </div>
</div>

<div class="subpage" id="subpage-pharmacies">
    <div class="subpage-header">
        <button class="subpage-back" onclick="closeSubpage()">â†</button>
        <div class="subpage-title">Altri servizi</div>
    </div>
    <div class="subpage-tabs">
        <div class="subpage-tab" onclick="switchTab('emergency')">ğŸš¨ Emergenza</div>
        <div class="subpage-tab active" onclick="switchTab('pharmacies')">ğŸ’Š Farmacie</div>
        <div class="subpage-tab" onclick="switchTab('hospitals')">ğŸ¥ Ospedali</div>
        <div class="subpage-tab" onclick="switchTab('vet')">ğŸ¾ Veterinario</div>
        <div class="subpage-tab" onclick="switchTab('other')">ğŸ“ Contatti</div>
    </div>
    <div class="subpage-content">
        <div class="section-label">Cavallino-Treporti</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-green">ğŸ’Š</div>
                <div class="list-content">
                    <div class="list-title">Farmacia Alla Madonna</div>
                    <div class="list-sub">Via Fausta 98, Ca' Savio</div>
                    <div class="list-meta">Lun-Sab 08:30-12:30 / 15:30-19:30</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415370113">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Farmacia+Alla+Madonna+Ca+Savio" target="_blank">ğŸ“</a>
                </div>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-green">ğŸ’Š</div>
                <div class="list-content">
                    <div class="list-title">Farmacia Internazionale</div>
                    <div class="list-sub">Via Fausta 301, Cavallino</div>
                    <div class="list-meta">Lun-Sab 08:30-12:30 / 15:30-19:30</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415370021">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Farmacia+Internazionale+Cavallino" target="_blank">ğŸ“</a>
                </div>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-green">ğŸ’Š</div>
                <div class="list-content">
                    <div class="list-title">Farmacia Treporti</div>
                    <div class="list-sub">Via Pordelio 7, Treporti</div>
                    <div class="list-meta">Lun-Sab 08:30-12:30 / 16:00-19:30</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415301057">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Farmacia+Treporti" target="_blank">ğŸ“</a>
                </div>
            </div>
        </div>
        <div class="section-label">Jesolo</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-green">ğŸ’Š</div>
                <div class="list-content">
                    <div class="list-title">Farmacia di Turno Jesolo</div>
                    <div class="list-sub">Varia settimanalmente</div>
                    <div class="list-meta">Turni notturni e festivi</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0421370613">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Farmacie+Jesolo" target="_blank">ğŸ“</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="subpage" id="subpage-hospitals">
    <div class="subpage-header">
        <button class="subpage-back" onclick="closeSubpage()">â†</button>
        <div class="subpage-title">Altri servizi</div>
    </div>
    <div class="subpage-tabs">
        <div class="subpage-tab" onclick="switchTab('emergency')">ğŸš¨ Emergenza</div>
        <div class="subpage-tab" onclick="switchTab('pharmacies')">ğŸ’Š Farmacie</div>
        <div class="subpage-tab active" onclick="switchTab('hospitals')">ğŸ¥ Ospedali</div>
        <div class="subpage-tab" onclick="switchTab('vet')">ğŸ¾ Veterinario</div>
        <div class="subpage-tab" onclick="switchTab('other')">ğŸ“ Contatti</div>
    </div>
    <div class="subpage-content">
        <div class="section-label">PiÃ¹ vicini</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-red">ğŸ¥</div>
                <div class="list-content">
                    <div class="list-title">PPI Ca' Savio</div>
                    <div class="list-sub">Via Fausta 374</div>
                    <div class="list-meta">~5 min Â· Primo intervento</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415370360">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=PPI+Ca+Savio" target="_blank">ğŸ“</a>
                </div>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-red">ğŸ¥</div>
                <div class="list-content">
                    <div class="list-title">Ospedale di Jesolo</div>
                    <div class="list-sub">Via Levantina 104</div>
                    <div class="list-meta">~15 min Â· Pronto Soccorso H24</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0421388111">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Ospedale+Jesolo" target="_blank">ğŸ“</a>
                </div>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-red">ğŸ¥</div>
                <div class="list-content">
                    <div class="list-title">Ospedale SS. Giovanni e Paolo</div>
                    <div class="list-sub">Venezia</div>
                    <div class="list-meta">~45 min Â· Hub regionale</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415294111">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Ospedale+Civile+Venezia" target="_blank">ğŸ“</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="subpage" id="subpage-vet">
    <div class="subpage-header">
        <button class="subpage-back" onclick="closeSubpage()">â†</button>
        <div class="subpage-title">Altri servizi</div>
    </div>
    <div class="subpage-tabs">
        <div class="subpage-tab" onclick="switchTab('emergency')">ğŸš¨ Emergenza</div>
        <div class="subpage-tab" onclick="switchTab('pharmacies')">ğŸ’Š Farmacie</div>
        <div class="subpage-tab" onclick="switchTab('hospitals')">ğŸ¥ Ospedali</div>
        <div class="subpage-tab active" onclick="switchTab('vet')">ğŸ¾ Veterinario</div>
        <div class="subpage-tab" onclick="switchTab('other')">ğŸ“ Contatti</div>
    </div>
    <div class="subpage-content">
        <div class="section-label">H24</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-red">ğŸ¾</div>
                <div class="list-content">
                    <div class="list-title">Clinica Vet H24 Jesolo</div>
                    <div class="list-sub">Via Roma 106, Jesolo</div>
                    <div class="list-meta">Emergenze animali 24/7</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0421370613">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Clinica+Veterinaria+Jesolo" target="_blank">ğŸ“</a>
                </div>
            </div>
        </div>
        <div class="section-label">Ambulatori zona</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-yellow">ğŸ•</div>
                <div class="list-content">
                    <div class="list-title">Ambulatorio Vet. Cavallino</div>
                    <div class="list-sub">Via Fausta 184</div>
                    <div class="list-meta">Lun-Sab 9-12 / 16-19</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415370188">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Via+Fausta+184+Cavallino" target="_blank">ğŸ“</a>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="subpage" id="subpage-other">
    <div class="subpage-header">
        <button class="subpage-back" onclick="closeSubpage()">â†</button>
        <div class="subpage-title">Altri servizi</div>
    </div>
    <div class="subpage-tabs">
        <div class="subpage-tab" onclick="switchTab('emergency')">ğŸš¨ Emergenza</div>
        <div class="subpage-tab" onclick="switchTab('pharmacies')">ğŸ’Š Farmacie</div>
        <div class="subpage-tab" onclick="switchTab('hospitals')">ğŸ¥ Ospedali</div>
        <div class="subpage-tab" onclick="switchTab('vet')">ğŸ¾ Veterinario</div>
        <div class="subpage-tab active" onclick="switchTab('other')">ğŸ“ Contatti</div>
    </div>
    <div class="subpage-content">
        <div class="section-label">Forze dell'ordine</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-blue">ğŸ‘®</div>
                <div class="list-content">
                    <div class="list-title">Carabinieri Cavallino</div>
                    <div class="list-sub">Via Pordelio 61</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415370022">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Carabinieri+Cavallino+Treporti" target="_blank">ğŸ“</a>
                </div>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-blue">ğŸ‘®</div>
                <div class="list-content">
                    <div class="list-title">Polizia Locale</div>
                    <div class="list-sub">Via Fausta 448</div>
                </div>
                <div class="list-actions">
                    <a class="action-btn call" href="tel:0415370450">ğŸ“</a>
                    <a class="action-btn nav" href="https://maps.google.com/?q=Polizia+Locale+Cavallino+Treporti" target="_blank">ğŸ“</a>
                </div>
            </div>
        </div>
        <div class="section-label">Servizi</div>
        <div class="list-card">
            <div class="list-item">
                <div class="list-icon icon-bg-yellow">ğŸš•</div>
                <div class="list-content">
                    <div class="list-title">Taxi Cavallino</div>
                </div>
                <a class="action-btn call" href="tel:0415370000">ğŸ“</a>
            </div>
            <div class="list-item">
                <div class="list-icon icon-bg-orange">ğŸš—</div>
                <div class="list-content">
                    <div class="list-title">Soccorso Stradale ACI</div>
                </div>
                <a class="action-btn call" href="tel:803116">ğŸ“</a>
            </div>
        </div>
    </div>
</div>

<script>
// Tab order per navigazione
const tabOrder = ['emergency', 'pharmacies', 'hospitals', 'vet', 'other'];

// Accordion
function toggleAccordion() {
    document.getElementById('accordion').classList.toggle('open');
}

// Subpages
function openSubpage(id) {
    const target = document.getElementById('subpage-' + id);
    target.classList.add('active');
    
    // Sincronizza tab attive in tutte le subpage
    const idx = tabOrder.indexOf(id);
    if (idx >= 0) {
        document.querySelectorAll('.subpage').forEach(subpage => {
            const tabs = subpage.querySelectorAll('.subpage-tab');
            tabs.forEach((tab, i) => {
                tab.classList.toggle('active', i === idx);
            });
        });
    }
}

function closeSubpage() {
    document.querySelectorAll('.subpage').forEach(s => s.classList.remove('active'));
}

// Switch tra tab (senza animazione slide)
function switchTab(id) {
    const current = document.querySelector('.subpage.active');
    const target = document.getElementById('subpage-' + id);
    
    if (current === target) return;
    
    // Aggiungi no-transition a tutte le subpage per switch istantaneo
    document.querySelectorAll('.subpage').forEach(s => s.classList.add('no-transition'));
    
    // Switch
    if (current) current.classList.remove('active');
    target.classList.add('active');
    
    // Aggiorna stato tab in TUTTE le subpage
    const idx = tabOrder.indexOf(id);
    document.querySelectorAll('.subpage').forEach(subpage => {
        const tabs = subpage.querySelectorAll('.subpage-tab');
        tabs.forEach((tab, i) => {
            tab.classList.toggle('active', i === idx);
        });
    });
    
    // Rimuovi no-transition dopo il render
    requestAnimationFrame(() => {
        document.querySelectorAll('.subpage').forEach(s => s.classList.remove('no-transition'));
        // Scroll tab bar
        const activeTab = target.querySelector('.subpage-tab.active');
        if (activeTab) {
            activeTab.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
        }
    });
}

// Swipe istantaneo (solo orizzontale)
let touchStartX = 0;
let touchStartY = 0;

document.addEventListener('touchstart', (e) => {
    touchStartX = e.changedTouches[0].screenX;
    touchStartY = e.changedTouches[0].screenY;
}, { passive: true });

document.addEventListener('touchend', (e) => {
    // Solo se siamo in una subpage
    if (!document.querySelector('.subpage.active')) return;
    
    const diffX = touchStartX - e.changedTouches[0].screenX;
    const diffY = Math.abs(touchStartY - e.changedTouches[0].screenY);
    
    // Ignora scroll verticale
    if (diffY > 50) return;
    
    // Threshold swipe
    if (Math.abs(diffX) < 80) return;
    
    // Trova tab corrente
    const active = document.querySelector('.subpage.active');
    const currentId = active.id.replace('subpage-', '');
    const idx = tabOrder.indexOf(currentId);
    
    if (diffX > 0 && idx < tabOrder.length - 1) {
        // Swipe left â†’ next
        switchTab(tabOrder[idx + 1]);
    } else if (diffX < 0 && idx > 0) {
        // Swipe right â†’ prev
        switchTab(tabOrder[idx - 1]);
    }
}, { passive: true });

// Share position
function sharePosition() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            (pos) => {
                const lat = pos.coords.latitude.toFixed(6);
                const lng = pos.coords.longitude.toFixed(6);
                const url = `https://maps.google.com/?q=${lat},${lng}`;
                if (navigator.share) {
                    navigator.share({ title: 'La mia posizione', url: url });
                } else {
                    window.open(url, '_blank');
                }
            },
            () => alert('Attiva il GPS'),
            { enableHighAccuracy: true, timeout: 10000 }
        );
    }
}

// Close subpage on back gesture / escape
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeSubpage();
});
</script>
</body>
</html>
